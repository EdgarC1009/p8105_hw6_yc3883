P8105\_HW6
================
Yijia Chen
2021-12-4

# Problem 1

## Problem 1 (a)

Load and clean the child’s birthweight data

??menarche with 0????

``` r
child_bw_df = 
  read_csv("data/birthweight.csv") %>% 
  mutate(
    babysex = factor(babysex),
    frace = factor(frace),
    malform = factor(malform),
    mrace = factor(mrace)
  )
```

    ## Rows: 4342 Columns: 20

    ## -- Column specification --------------------------------------------------------
    ## Delimiter: ","
    ## dbl (20): babysex, bhead, blength, bwt, delwt, fincome, frace, gaweeks, malf...

    ## 
    ## i Use `spec()` to retrieve the full column specification for this data.
    ## i Specify the column types or set `show_col_types = FALSE` to quiet this message.

Propose a regression model for birthweight base on baby’s head
circumference at birth and baby’s length at birth

Check assumption of regression

``` r
bhead_den = 
  child_bw_df %>% 
  select(bhead) %>% 
  ggplot(aes(x = bhead)) +
  geom_density()

blength_den = 
  child_bw_df %>% 
  select(blength) %>% 
  ggplot(aes(x = blength)) +
  geom_density()

bwt_den =
  child_bw_df %>% 
  select(bwt) %>% 
  ggplot(aes(x = bwt)) +
  geom_density()
```

Fit the model

Describe your modeling process and show a plot of model residuals
against fitted values – use add\_predictions and add\_residuals in
making this plot.

``` r
model_1 = 
  lm(bwt ~ bhead + blength, data = child_bw_df) 

model1_des_plot =
  child_bw_df %>% 
  select(bhead, blength, bwt) %>% 
  relocate(bwt) %>% 
  add_predictions(model_1) %>% 
  add_residuals(model_1) %>% 
  ggplot(aes(x = pred, y = resid)) +
  geom_point()
```

## Problem 1 (b)

Compare your model to two others:

A. One using length at birth and gestational age as predictors (main
effects only) B. One using head circumference, length, sex, and all
interactions (including the three-way interaction) between these

Generate the A and B model

``` r
train_df = sample_n(child_bw_df, 3500)
test_df = anti_join(child_bw_df, train_df)
```

    ## Joining, by = c("babysex", "bhead", "blength", "bwt", "delwt", "fincome", "frace", "gaweeks", "malform", "menarche", "mheight", "momage", "mrace", "parity", "pnumlbw", "pnumsga", "ppbmi", "ppwt", "smoken", "wtgain")

``` r
model_A = 
  lm(bwt ~ blength + gaweeks, data = child_bw_df)

model_B = 
  lm(bwt ~ babysex + bhead + blength + babysex * bhead + babysex * blength + bhead * blength + babysex * bhead * blength, data = child_bw_df)
```
